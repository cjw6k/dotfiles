name: Continuous Integration

on:
  workflow_dispatch:
  push:
    branches:
      - 'main'

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  call-linux-alpine:
    uses: ./.github/workflows/ci-linux-alpine.yml

  call-freebsd:
    needs: call-linux-alpine
    uses: ./.github/workflows/ci-freebsd.yml

  call-windows:
    needs: call-linux-alpine
    uses: ./.github/workflows/ci-windows.yml

  call-linux-gentoo:
    needs: call-linux-alpine
    uses: ./.github/workflows/ci-linux-gentoo.yml

  call-linux-debian:
    needs: call-linux-alpine
    uses: ./.github/workflows/ci-linux-debian.yml

  call-linux-ubuntu:
    needs: call-linux-alpine
    uses: ./.github/workflows/ci-linux-ubuntu.yml
