# ~/.config/dotfiles/utils.json hash:
# {{ include "private_dot_config/dotfiles/utils.json" | sha256sum }}

$skipInstall = @("#builtin", "#custom")

$utils = Get-Content '~/.config/dotfiles/utils.json' `
  | ConvertFrom-Json `
  | Where-Object { `
    $_.personal -eq $null `
    -and $_.install.common -notin $skipInstall `
    -and $_.install.windows -notin $skipInstall `
  }

$toInstall = @()
foreach ($util in $utils) {
  $toInstall += $util.name
}

shovel install @toInstall
